<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{admin/admin-layout :: layout(pageContent = ~{::main})}">

<main class="p-8">
  <h1 class="text-3xl font-bold text-gray-900 mb-6" th:text="${plan.id == null ? 'Add New Plan' : 'Edit Subscription Plan'}">Edit Subscription Plan</h1>

  <div class="bg-white shadow-lg rounded-2xl p-8">
    <form th:action="@{/admin/plans/save}" th:object="${plan}" method="post" class="space-y-6">

      <input type="hidden" th:field="*{id}" />

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="planName" class="block text-sm font-medium text-gray-700">Plan Name</label>
          <input type="text" id="planName" th:field="*{planName}"
                 class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500"
                 required />
        </div>

        <div>
          <label for="planKey" class="block text-sm font-medium text-gray-700">Plan Key</label>
          <input type="text" id="planKey" th:field="*{planKey}"
                 class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500"
                 placeholder="e.g., premium (no spaces, all lowercase)" required />
        </div>
      </div>

      <div>
        <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
        <textarea id="description" th:field="*{description}" rows="3"
                  class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500"></textarea>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="monthlyPrice" class="block text-sm font-medium text-gray-700">Monthly Price (e.g., 190.00)</label>
          <input type="number" step="0.01" id="monthlyPrice" th:field="*{monthlyPrice}"
                 class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500" />
        </div>
        <div>
          <label for="yearlyPrice" class="block text-sm font-medium text-gray-700">Yearly Price (e.g., 1824.00)</label>
          <input type="number" step="0.01" id="yearlyPrice" th:field="*{yearlyPrice}"
                 class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500" />
        </div>
      </div>

      <div>
        <label for="features" class="block text-sm font-medium text-gray-700">Features</label>
        <textarea id="features" th:field="*{features}" rows="4"
                  class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500"
                  placeholder="Must be in this format: [\&quot;Feature 1\&quot;, \&quot;Feature 2\&quot;]"></textarea>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="maxResumes" class="block text-sm font-medium text-gray-700">Max Resumes (-1 for unlimited)</label>
          <input type="number" id="maxResumes" th:field="*{maxResumes}"
                 class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500" />
        </div>
        <div>
          <label for="maxTemplates" class="block text-sm font-medium text-gray-700">Max Templates (-1 for unlimited)</label>
          <input type="number" id="maxTemplates" th:field="*{maxTemplates}"
                 class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-purple-500 focus:border-purple-500" />
        </div>
      </div>

      <div class="flex items-center gap-8 pt-4">
        <div class="flex items-center gap-2">
          <input type="hidden" name="_active" value="on" />
          <input type="checkbox" id="active" th:field="*{active}"
                 class="h-5 w-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500" />
          <label for="active" class="text-sm font-medium text-gray-700">Is Active</label>
        </div>
      </div>

      <div class="flex justify-end gap-4 pt-6 border-t border-gray-200">
        <a th:href="@{/admin/subscriptions}"
           class="px-6 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200">
          Cancel
        </a>
        <button type="submit"
                class="flex items-center gap-2 px-6 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg shadow-sm hover:bg-purple-700">
          <i data-lucide="save" class="w-4 h-4"></i>
          Save Plan
        </button>
      </div>

    </form>
  </div>
</main>
</html>