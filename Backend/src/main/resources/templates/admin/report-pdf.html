<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>MyResuMate Report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; font-size: 10pt; }
        .header { text-align: center; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .header h1 { margin: 0; color: #8A2BE2; }
        .header p { margin: 5px 0 0; font-size: 11pt; color: #555; }
        .content { margin-top: 20px; }
        h2 { font-size: 14pt; color: #333; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .stats-grid { display: block; margin-bottom: 20px; }
        .stat-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            width: 30%;
            display: inline-block;
            margin: 5px;
            box-sizing: border-box;
        }
        .stat-card .label { font-size: 10pt; color: #666; }
        .stat-card .value { font-size: 18pt; font-weight: bold; color: #8A2BE2; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f9f9f9; font-size: 10pt; }
        td { font-size: 9pt; }
    </style>
</head>
<body>
<div class="header">
    <h1>MyResuMate Admin Report</h1>
    <p>Report for: <b th:text="${report.dateRangeLabel}">Last 7 Days</b></p>
    <p style="font-size: 9pt;">Generated on: <span th:text="${#temporals.format(T(java.time.LocalDate).now(), 'MMM dd, yyyy')}"></span></p>
</div>

<div class="content">
    <h2>Summary for <span th:text="${report.dateRangeLabel}"></span></h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="label">Total Revenue</div>
            <div class="value">₹<span th:text="${#numbers.formatDecimal(report.totalRevenueForRange, 1, 'COMMA', 2, 'POINT')}">0.00</span></div>
        </div>
        <div class="stat-card">
            <div class="label">New Users</div>
            <div class="value" th:text="${report.newUsersForRange}">0</div>
        </div>
        <div class="stat-card">
            <div class="label">New Subscriptions</div>
            <div class="value" th:text="${report.newSubscriptionsForRange}">0</div>
        </div>
    </div>

    <h2>All-Time Statistics</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="label">Total Users (All-Time)</div>
            <div class="value" th:text="${totalUsersAllTime}">0</div>
        </div>
        <div class="stat-card">
            <div class="label">Premium Users (All-Time)</div>
            <div class="value" th:text="${activeSubscriptionsAllTime}">0</div>
        </div>
        <div class="stat-card">
            <div class="label">Resumes Created (All-Time)</div>
            <div class="value" th:text="${totalResumesAllTime}">0</div>
        </div>
    </div>

    <h2>Recent Transactions</h2>
    <table>
        <thead>
        <tr>
            <th>User</th>
            <th>Email</th>
            <th>Amount</th>
            <th>Date</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="tx : ${report.recentTransactions}">
            <td th:text="${tx.user.name}">Juhil Mistry</td>
            <td th:text="${tx.user.email}">juhil@example.com</td>
            <td th:text="|₹${tx.amount}|">₹1824.00</td>
            <td th:text="${#temporals.format(tx.paymentDate, 'MMM dd, yyyy')}">Nov 07, 2025</td>
        </tr>
        </tbody>
    </table>

    <h2>New Users</h2>
    <table>
        <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Status</th>
            <th>Joined</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${report.recentUsers}">
            <td th:text="${user.name}">Dev Panchal</td>
            <td th:text="${user.email}">dev@example.com</td>
            <td>
                <span th:if="${user.isPremium}">Premium</span>
                <span th:unless="${user.isPremium}">Free</span>
            </td>
            <td th:text="${#temporals.format(user.createdAt, 'MMM dd, yyyy')}">Nov 08, 2025</td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>